# 통계학 5주차 정규과제

📌통계학 정규과제는 매주 정해진 분량의 『*데이터 분석가가 반드시 알아야 할 모든 것*』 을 읽고 학습하는 것입니다. 이번 주는 아래의 **Statistics_5th_TIL**에 나열된 분량을 읽고 `학습 목표`에 맞게 공부하시면 됩니다.

아래의 문제를 풀어보며 학습 내용을 점검하세요. 문제를 해결하는 과정에서 개념을 스스로 정리하고, 필요한 경우 추가자료와 교재를 다시 참고하여 보완하는 것이 좋습니다.

5주차는 `3부-12.통계 기반 분석 방법론`를 읽고 새롭게 배운 내용을 정리해주시면 됩니다.

[실습코드](https://github.com/c-karl/DA_DS_Book001)를 참고하여 학습해주세요.

### 추가자료
---
[PCA](https://youtu.be/nEvKduLXFvk?si=3boneV3nAQe-OoU4)


## Statistics_5th_TIL

### 3부. 데이터 분석 준비하기
### 12.통계 기반 분석 방법론



## Study Schedule

|주차 | 공부 범위     | 완료 여부 |
|----|--------------|----------|
|1주차| 1부 ~p.79    | ✅      |
|2주차| 2부 ~p.120   | ✅      | 
|3주차| 2부 ~p.202   | ✅      | 
|4주차| 2부 ~p.299   | ✅      | 
|5주차| 3부 ~p.356   | ✅      | 
|6주차| 3부 ~p.437   | 🍽️      | 
|7주차| 3부 ~p.542   | 🍽️      | 
|8주차| 3부 ~p.615   | 🍽️      | 
|9주차|데이터 분석 실습| 🍽️      |

<!-- 여기까진 그대로 둬 주세요-->

# 12.통계 기반 분석 방법론

```
✅ 학습 목표 :
* 차원 축소 기법(PCA, CFA)을 이해하고 활용할 수 있다.
* 다중공선성을 확인하고 해결하는 방법을 이해하며, 회귀 분석에서 변수 간 상관성을 줄이는 방법을 설명할 수 있다.
* Z-TEST와 T-TEST의 개념과 차이를 이해하고, 적절한 상황에서 검정을 설계하고 수행할 수 있다.
* ANOVA TEST를 활용하여 세 개 이상의 그룹 간 평균 차이를 검정하고, 사후검정을 수행할 수 있다.
* 카이제곱 검정을 통해 범주형 변수 간의 독립성과 연관성을 분석하는 방법을 설명할 수 있다.
```
<!-- 새롭게 배운 내용을 자유롭게 정리해주세요.-->

## 분석 모델 개요
### 통계 모델과 기계 학습의 차이점
- 통계 모델은 **모형과 해석**을 중요하게 생각하며, **오차와 불확정성을 강조**함
- 기계학습은 대용량 데이터를 활용하여 **예측의 정확도를 높이는 것을 중요**하게 생각함

![](https://github.com/bird-one-00/25-1_STATISTICS_Assignment/blob/main/img/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202025-02-16%20014027.png)

### 데이터 분석 방법론 개요
![](https://github.com/bird-one-00/25-1_STATISTICS_Assignment/blob/main/img/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202025-02-16%20014444.png)
![](https://github.com/bird-one-00/25-1_STATISTICS_Assignment/blob/main/img/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202025-02-16%20014454.png)

### 기계 학습 방법론 개요
![](https://github.com/bird-one-00/25-1_STATISTICS_Assignment/blob/main/img/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202025-02-16%20014654.png)

- 지도학습: 입력에 대한 정답이 주어져서 출력된 결괏값과 정답 사이의 오차가 줄어들도록 학습과 모델 수정을 반복
    - 결과값이 양적 척도 → `회귀`
        - 아파트 가격을 추정하기 위해 평수, 지역, 주변 공공 시설 유무 등을 독립변수로 하여 학습
    - 결과값이 질적 척도 → `분류`
        - 양성/음성과 같은 이진 형식의 결과를 분류, 고객의 구매 패턴을 분석하여 앞으로 구매할 제품 카테고리를 예측
- 비지도학습: 별도의 정답이 없이 변수 간의 패턴을 파악하거나 데이터를 군집화
    - `차원 축소`: 지도학습을 할 때 학습 성능을 높이기 위한 전처리 방법으로 많이 사용
    - `군집 분석`: 정답지(labeling) 없이 유사한 관측치들끼리 군집으로 분류
    - `연관 규칙`: 제품이나 콘텐츠를 추천하기 위해 사용하는 모델
- 강화학습: trail and error

## 주성분 분석(PCA)
- PCA: Principal Component Anlysis
- 여러 개의 독립변수들을 잘 설명해 줄 수 있는 주된 성분을 추출하는 기법
- 독립변수(차원)의 수를 줄일 수 있기 때문에, 차원의 저주를 방지하기 위한 방법
- 변수의 수를 줄임으로써 모형을 간단하게 만들 수 있고, 분석 결과를 보다 효과적으로 해석할 수 있음
- PCA를 위한 조건: 사용되는 변수들이 모두 `양적 변수`여야 하고, 관측치들이 서로 독립적이고 정규분포를 이루고 있어야 함
- 일반적으로 제1주성분, 제2주성분만으로 대부분의 설명력이 포함되기 때문에 두 개의 주성분만 선정함
- 주성분은 최대 변수의 개수만큼 만들 수 있음

### 차원의 저주
- 변수가 늘어남에 따라 차원이 커지면서 분석을 위한 최소한의 필요 데이터 건수가 늘어나면서 예측이 불안정해지는 문제
- 변수가 늘어날수록 과적합(overfitting)의 위험성이 증가하며, 상관관계가 높은 변수로 인한 **다중공선성 문제**도 발생할 수 있음

### PCA 실습
1. 패키지 임포드
2. 데이터 불러오기
3. 데이터 정규화 적용
- 변수들 간의 스케일 차이가 클 경우 분산이 큰 변수가 주성분에 과도하게 영향을 주는 것을 방지하기 위함
4. 주성분 생성 후 설명력 확인
- 변수가 N개라면, 주성분 또한 N개를 만들 수 있음
- N개 주성분의 설명력 총합은 100%임

## 공통요인분석(CFA)
- CFA: Common Factor Analysis
- PCA와 CFA의 공통점: 모두 요인분석을 하기 위한 기법의 종류임
- PCA와 CFA의 차이점: PCA는 전체 분산을 토대로 요인을 추출하는 반면, CFA는 공통분산만을 토대로 요인을 추출함. 즉, PCA는 전체 독립변수들을 잘 설명해줄 수 있는 주성분 2~3개를 추출한다면, CFA는 상관성이 높은 변수들을 묶어 잠재된 몇 개의 변수를 찾음
- CFA로 생성한 주성분들은 서로 간에 무엇이 더 중요한 변수라는 우위 개념이 없음
- 요인 분석의 선행 조건: 독립변수들 간의 상관성이 요인분석에 적합한지 검증(적합성 검증)

    > 검증 방법1. 바틀렛 테스트 → 행렬식을 이용하여 카이제곱값을 구하여 각 변수들 사이의 상관계수의 적합성을 검증하는 방법, 유의확률 p값이 0.05보다 작으면 변수들 간에 상관관계가 있다는 뜻이므로 분석에 적합하다고 판단

    > 검증방법2. KMO 검정 → 변수들 간의 상관관계가 다른 변수에 의해 잘 설명되는 정도를 나타내는 값으로, 일반적으로 0.8 이상이면 우수, 0.5 이상이면 적합, 0.5 미만이면 부적합

- 적합성 검증 후에는, 주성분 변수들의 고유치를 확인하여 요인의 개수 결정. 이때 `고유치 표`를 확인하고, 추가적으로 `스크리 도표(scree plot)`을 참고하여 적정한 요인 수를 판단함(`엘보우 포인트` 확인)
- 요인 적재 값이 ±0.3 이상이면 변수와 요인에 유의성이 있다고 할 수 있으며, 일반적으로 ±0.5 이상이면 해당 요인에서 중요한 변수로 판단함
- 요인에 대한 판단이나 명명(이름 짓기)은 주관적 판ㄷ나이 들어갈 수밖에 없으므로, 항상 주의해서 해석해야 함

## 다중공선성 해결
- 다중공선성: 독립변수들 간의 상관관계가 높은 현상 = 독립 변수들 간에는 서로 독립이라는 회귀분석의 전체 가정을 위반하게 됨, 모델의 정합성이 맞지 않는 문제 발생

## 다중공선성 판별과 해결 방법
1. 상관분석을 했는데, 독립변수들 중에 높은 상관계수를 가질 경우
    - 상관계수의 절대치가 0.7 이상이면 두 변수 간의 상관성이 높다는 의미
    - 그러나, 변수가 밚을 경우 상관성을 파악하기 힘들다는 단점이 있음
2. 회귀분석 결과에서 결정계수 R²은 크지만 t값이 낮은 경우
    - 종속변수에 대한 독립변수들의 설명력은 높은데, 각 계수 추정치의 표준오차가 크다는 것은, 독립변수 간의 상관성이 크다는 의미
3. VIF(Variance Inflation Factor): 분산팽창계수 확인
    - VIF값: 회귀분석 모델에 사용된 다른 독립 변수들이 해당 변수 대신 모델을 설명해 줄 수 있는 정도를 보여줌
    - VIF값이 높은 변수들 중에서 종속변수와 상관성(설명력)이 낮은 변수를 제거하고, 다시 VIF값을 확인하는 것을 반복하는 것
    - 이때, 특정 변수가 분석 모델의 이론이나 가설에 중요한 역할을 할 수도 있으므로, 가설과 비즈니스적 요소를 함께 고려하여 변수를 제거해야 함
4. 변수를 가공하여 변수 간의 상관성을 줄이는 방법
    - 변수에 로그를 취하거나, 표준화 및 정규화 변환을 해주면 상관성이 완화될 수 있음
5. 주성분 분석(PCA) 진행
    - 그러나 이 경우 변수의 해석이 어려워질 수 있음
6. 변수 선택 알고리즘 활용

## 섀플리 밸류
- 각 독립변수가 종속변수의 설명력에 기여하는 순수한 수치를 계산하는 방법(독립변수의 설명력 분배 방법)

![](https://github.com/bird-one-00/25-1_STATISTICS_Assignment/blob/main/img/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202025-02-16%20024303.png)

![](https://github.com/bird-one-00/25-1_STATISTICS_Assignment/blob/main/img/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202025-02-16%20024310.png)

- 변수를 모델에 투입했을 때 설명력에 어느 정도를 기여하는지 측정할 수 있음

## Z-test, T-test, ANOVA
- 집단 내 혹은 집단 간의 평균값 차이가 통계적으로 유의미한 것인지 알아내는 방법
### Z-test와 T-test
- 단일 표본 집단의 평균 변화를 분석하거나, 두 집단의 평균값 혹은 비율 차이를 분석할 때 사용
    - 시행 조건: 분석하고자 하는 변수가 양적 변수, 정규 분포, 등분산이라는 조건이 충족되어야 함
- Z-test는 표본의 크기가 30 이상일 때 사용하고, t-test는 표본의 크기가 30 미만이어서 표본 집단의 정규분포를 가정할 수 없을 때 사용함. 그러나 t-test는 표본 집단의 크기가 30 이상일 때도 사용 가능하기 때문에 일반적으로 t-test는 사용함

![]()




<br>
<br>

# 확인 문제

### **문제 1. 주성분 분석 (PCA)**
> **🧚 아래는 어떤 데이터셋에 대해 주성분 분석(PCA)을 수행한 결과입니다. 결과표를 보고 적절한 차원 축소 개수를 결정해주세요.**

#### **[PCA 결과표]**
| 주성분 | 고유값(Eigenvalue) | 설명된 분산 비율(%) | 누적 설명된 분산 비율(%) |
|--------|-------------------|-------------------|-----------------------|
| PC1    | 4.2               | 42.0%             | 42.0%                 |
| PC2    | 2.8               | 28.0%             | 70.0%                 |
| PC3    | 1.5               | 15.0%             | 85.0%                 |
| PC4    | 0.9               | 9.0%              | 94.0%                 |
| PC5    | 0.6               | 6.0%              | 100.0%                | 

<!--정해진 답은 없습니다. 적절한 근거를 들어 자유롭게 작성해주세요.-->

```
여기에 답을 작성해주세요!
```
---

### **문제 2.**
> **🧚 경희는 다트비 교육 연구소의 연구원이다. 경희는 이번에 새롭게 개발한 교육 프로그램이 기존 프로그램보다 학습 성취도 향상에 효과적인지 검증하고자 100명의 학생을 무작위로 두 그룹으로 나누어 한 그룹(A)은 새로운 교육 프로그램을, 다른 그룹(B)은 기존 교육 프로그램을 수강하도록 하였다. 8주 후, 학생들의 최종 시험 점수를 수집하여 두 그룹 간 평균 점수를 비교하려 한다.**   

> **🔍 Q1. 이 실험에서 사용할 적절한 검정 방법은 무엇인가요?**

```
여기에 답을 작성해주세요!
```

> **🔍 Q2. 이 실험에서 설정해야 할 귀무가설과 대립가설을 각각 작성하세요.**

```
여기에 답을 작성해주세요!
```

> **🔍 Q3. 검정을 수행하기 위한 절차를 순서대로 서술하세요.**

<!--P.337의 실습 코드 흐름을 확인하여 데이터를 불러온 후부터 어떤 절차로 검정을 수행해야 하는지 고민해보세요.-->

```
여기에 답을 작성해주세요!
```

> **🔍 Q4. 이 검정을 수행할 때 가정해야 하는 통계적 조건을 설명하세요.**

```
여기에 답을 작성해주세요!
```

> **🔍 Q5. 추가적으로 최신 AI 기반 교육 프로그램(C)도 도입하여 기존 프로그램(B) 및 새로운 프로그램(A)과 비교하여 성취도 차이가 있는지 평가하고자 한다면 어떤 검정 방법을 사용해야 할까요?**

```
여기에 답을 작성해주세요!
```

> **🔍 Q6. 5번에서 답한 검정을 수행한 결과, 유의미한 차이가 나타났다면 추가적으로 어떤 검정을 수행해 볼 수 있을까요?**

```
여기에 답을 작성해주세요!
```

---

### **문제 3. 카이제곱 검정**  
> **🧚 다음 중 어떠한 경우에 카이제곱 검정을 사용해야 하나요?   
1️⃣ 제품 A, B, C의 평균 매출 차이를 비교하고자 한다.  
2️⃣ 남성과 여성의 신체 건강 점수 평균 차이를 분석한다.  
3️⃣ 제품 구매 여부(구매/미구매)와 고객의 연령대(10대, 20대, 30대…) 간의 연관성을 분석한다.  
4️⃣ 특정 치료법이 환자의 혈압을 감소시키는 효과가 있는지 확인한다.**  

```
여기에 답을 작성해주세요!
```

### 🎉 수고하셨습니다.